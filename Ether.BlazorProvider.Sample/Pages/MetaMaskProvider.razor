@page "/metamaskprovider"
@using System.Numerics
@using Ether.BlazorProvider

@implements IDisposable
@inject IEtherProvider _etherProvider;

<PageTitle>Ether Provider (MetaMask)</PageTitle>

   <ProviderSummary ProviderName="MetaMask" Provider="@_myProvider"/>

@code {

    private IJsonRpcProvider? _myProvider;

    protected override void OnInitialized()
    {
        base.OnInitialized();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);

        if( firstRender)
        {

            //var options = new JsonRpcProviderOptions()
            //    {
            //        ProviderPath = "ethereum",
            //        SupportsEip1193 = true
            //    };

            // using the built in MetaMask options 

            _myProvider = await _etherProvider.InitProvider("metamask", JsonRpcProviderOptions.MetaMaskOptions );
            StateHasChanged();
        }
    }

    public void Dispose()
    {
    }
}
