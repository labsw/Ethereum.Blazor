@page "/metamaskprovider"
@using System.Numerics
@using Ether.BlazorProvider

@implements IDisposable
@inject IEtherProvider _etherProvider;

<PageTitle>Ether Provider (MetaMask)</PageTitle>

   <ProviderSummary ProviderName="MetaMask" Provider="@_provider" @ref="_providerSummary"/>

@code {

    private IJsonRpcProvider? _provider;
    private ProviderSummary? _providerSummary;

    protected override void OnInitialized()
    {
        base.OnInitialized();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);

        if( firstRender)
        {
            var options = new JsonRpcProviderOptions()
                {
                    ProviderPath = "ethereum",
                    SupportsEip1193 = true
                };

            _provider = await _etherProvider.InitProvider("metamask", options );
            StateHasChanged();
        }
    }

    public void Dispose()
    {
    }
}
